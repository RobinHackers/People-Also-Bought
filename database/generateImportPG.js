const fs = require('fs');

const filepath = './database/importPG.sql';

const append = (i, path) => {
  const data = `\\COPY ${path} FROM './seeds/${path}_${384616 * i}.csv' WITH QUOTE AS '\`' DELIMITER AS '|' CSV HEADER;\n`;
  fs.appendFile(filepath, data, (error) => {
    if (error) { console.log(error); }
  });
};

const header = `
-- #######                                            #######
--   #######################################################
--   #########                                     #########
--   #########        Script Generated by:         #########
--   #########        generatedImportSchema.js     #########
--   #########                                     #########
--   #######################################################
-- #######                                            #######\n\n\n
`;

fs.writeFile(filepath, header, (e) => {
  if (e) { console.log(e); }
  for (let i = 0; i < 26; i++) {
    append(i, 'companies');
  }
  for (let i = 0; i < 26; i++) {
    append(i, 'alsobought');
  }
});
